{
  "default": {
    "cguid": 1,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of VertxProtoStub",
    "objectName": "VertxProtoStub",
    "sourcePackageURL": "/sourcePackage",
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTsKCmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGFjdGl2YXRlOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9Cgp2YXIgVmVydHhQcm90b1N0dWIgPSAoZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgIF9jb250aW51b3VzT3BlbjogYm9vbGVhbgogICAgIF9ydW50aW1lUHJvdG9TdHViVVJMOiBzdHJpbmcKICAgIF9idXM6IE1pbmlCdXMKICAgIF9tc2dDYWxsYmFjazogKE1lc3NhZ2UpID0+IHZvaWQKICAgIF9jb25maWc6IHsgdXJsLCBydW50aW1lVVJMIH0KICAgICBfc29jazogKFdlYlNvY2tldCB8IFNvY2tKUykKICAgIF9yZU9wZW46IGJvb2xlYW4KICAqLwoKICAvKioKICAgKiBWZXJ0eCBQcm90b1N0dWIgY3JlYXRpb24KICAgKiBAcGFyYW0gIHtzdHJpbmd9IHJ1bnRpbWVQcm90b1N0dWJVUkwgLSBVUkwgdXNlZCBpbnRlcm5hbGx5IGZvciBtZXNzYWdlIGRlbGl2ZXJ5IHBvaW50LiBOb3QgdXNlZCBmb3IgTWVzc2FnZU5vZGUgZGVsaXZlci4KICAgKiBAcGFyYW0gIHtNaW5pQnVzfSBidXMgLSBNaW5pQnVzIHVzZWQgdG8gc2VuZC9yZWNlaXZlIG1lc3NhZ2VzLiBOb3JtYWxseSBjb25uZWN0ZWQgdG8gdGhlIE1lc3NhZ2VCdXMuCiAgICogQHBhcmFtICB7T2JqZWN0fSBjb25maWcgLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4KICAgKiBAcmV0dXJuIHtWZXJ0eFByb3RvU3R1Yn0KICAgKi8KCiAgZnVuY3Rpb24gVmVydHhQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWZXJ0eFByb3RvU3R1Yik7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLl9pZCA9IDA7CiAgICB0aGlzLl9jb250aW51b3VzT3BlbiA9IHRydWU7CgogICAgdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICB0aGlzLl9idXMgPSBidXM7CiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7CgogICAgdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBjb25maWcucnVudGltZVVSTDsKICAgIHRoaXMuX3JlT3BlbiA9IGZhbHNlOwoKICAgIGJ1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgX3RoaXMuX29wZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChfdGhpcy5fZmlsdGVyKG1zZykpIHsKICAgICAgICAgIF90aGlzLl9zb2NrLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0KCiAgLyoqCiAgICogR2V0IHRoZSBjb25maWd1cmF0aW9uIGZvciB0aGlzIFByb3RvU3R1YgogICAqIEByZXR1cm4ge09iamVjdH0gLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4KICAgKi8KCiAgX2NyZWF0ZUNsYXNzKFZlcnR4UHJvdG9TdHViLCBbewogICAga2V5OiAnY29ubmVjdCcsCgogICAgLyoqCiAgICAgKiBUcnkgdG8gb3BlbiB0aGUgY29ubmVjdGlvbiB0byB0aGUgTWVzc2FnZU5vZGUuIENvbm5lY3Rpb24gaXMgYXV0byBtYW5hZ2VkLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNhbGwgdGhpcyBleHBsaWNpdGx5LgogICAgICogSG93ZXZlciwgaWYgImRpc2Nvbm5lY3QoKSIgaXMgY2FsbGVkLCBpdCdzIG5lY2Vzc2FyeSB0byBjYWxsIHRoaXMgdG8gZW5hYmxlIGNvbm5lY3Rpb25zIGFnYWluLgogICAgICogQSBzdGF0dXMgbWVzc2FnZSBpcyBzZW50IHRvICJydW50aW1lUHJvdG9TdHViVVJML3N0YXR1cyIsIGNvbnRhaW5pbmcgdGhlIHZhbHVlICJjb25uZWN0ZWQiIGlmIHN1Y2Nlc3NmdWwsIG9yICJkaXNjb25uZWN0ZWQiIGlmIHNvbWUgZXJyb3Igb2NjdXJzLgogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9jb250aW51b3VzT3BlbiA9IHRydWU7CiAgICAgIF90aGlzLl9vcGVuKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0KCiAgICAvKioKICAgICAqIEl0IHdpbGwgZGlzY29ubmVjdCBhbmQgb3JkZXIgdG8gc3RheSBkaXNjb25uZWN0ZWQuIFJlY29ubmVjdGlvbiB0cmllcywgd2lsbCBub3QgYmUgYXR0ZW1wdGVkLCB1bmxlc3MgImNvbm5lY3QoKSIgaXMgY2FsbGVkLgogICAgICogQSBzdGF0dXMgbWVzc2FnZSBpcyBzZW50IHRvICJydW50aW1lUHJvdG9TdHViVVJML3N0YXR1cyIgd2l0aCB2YWx1ZSAiZGlzY29ubmVjdGVkIi4KICAgICAqLwogIH0sIHsKICAgIGtleTogJ2Rpc2Nvbm5lY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fY29udGludW91c09wZW4gPSBmYWxzZTsKICAgICAgaWYgKF90aGlzLl9zb2NrKSB7CiAgICAgICAgX3RoaXMuX3NlbmRDbG9zZSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX3NlbmRPcGVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZE9wZW4oY2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9pZCsrOwogICAgICB2YXIgbXNnID0gewogICAgICAgIGlkOiBfdGhpcy5faWQsIHR5cGU6ICdvcGVuJywgZnJvbTogX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMLCB0bzogJ21uOi9zZXNzaW9uJwogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9yZU9wZW4pIHsKICAgICAgICBtc2cudHlwZSA9ICdyZS1vcGVuJzsKICAgICAgfQoKICAgICAgLy9yZWdpc3RlciBhbmQgd2FpdCBmb3Igb3BlbiByZXBseS4uLgogICAgICB2YXIgaGFzUmVzcG9uc2UgPSBmYWxzZTsKICAgICAgX3RoaXMuX3Nlc3Npb25DYWxsYmFjayA9IGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgIGlmIChyZXBseS50eXBlID09PSAncmVzcG9uc2UnICYgcmVwbHkuaWQgPT09IG1zZy5pZCkgewogICAgICAgICAgaGFzUmVzcG9uc2UgPSB0cnVlOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIGlmIChyZXBseS5ib2R5LnJ1bnRpbWVUb2tlbikgewogICAgICAgICAgICAgIC8vc2V0dXAgcnVudGltZVNlc3Npb24KICAgICAgICAgICAgICBfdGhpcy5fcmVPcGVuID0gdHJ1ZTsKICAgICAgICAgICAgICBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBfdGhpcy5fY29uZmlnLnJ1bnRpbWVVUkwgKyAnLycgKyByZXBseS5ib2R5LnJ1bnRpbWVUb2tlbjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Nvbm5lY3RlZCcpOwogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsIHJlcGx5LmJvZHkuZGVzYyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCFoYXNSZXNwb25zZSkgewogICAgICAgICAgLy9ubyByZXNwb25zZSBhZnRlciB4IHNlY29uZHMuLi4KICAgICAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdkaXNjb25uZWN0ZWQnLCAnVGltZW91dCBmcm9tIG1uOi9zZXNzaW9uJyk7CiAgICAgICAgfQogICAgICB9LCAzMDAwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZENsb3NlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZENsb3NlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2lkKys7CiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgaWQ6IF90aGlzLl9pZCwgdHlwZTogJ2Nsb3NlJywgZnJvbTogX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMLCB0bzogJ21uOi9zZXNzaW9uJwogICAgICB9OwoKICAgICAgLy9pbnZhbGlkYXRlIHJ1bnRpbWVTZXNzaW9uCiAgICAgIF90aGlzLl9yZU9wZW4gPSBmYWxzZTsKICAgICAgX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMID0gX3RoaXMuX2NvbmZpZy5fcnVudGltZVVSTDsKCiAgICAgIF90aGlzLl9zb2NrLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3NlbmRTdGF0dXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kU3RhdHVzKHZhbHVlLCByZWFzb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ3VwZGF0ZScsCiAgICAgICAgZnJvbTogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwsCiAgICAgICAgdG86IF90aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMICsgJy9zdGF0dXMnLAogICAgICAgIGJvZHk6IHsKICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChyZWFzb24pIHsKICAgICAgICBtc2cuYm9keS5kZXNjID0gcmVhc29uOwogICAgICB9CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3dhaXRSZWFkeScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3dhaXRSZWFkeShjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLl9zb2NrLnJlYWR5U3RhdGUgPT09IDEpIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9IGVsc2UgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuX3dhaXRSZWFkeShjYWxsYmFjayk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZmlsdGVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZmlsdGVyKG1zZykgewogICAgICBpZiAobXNnLmJvZHkgJiYgbXNnLmJvZHkudmlhID09PSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogJ19kZWxpdmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsaXZlcihtc2cpIHsKICAgICAgaWYgKCFtc2cuYm9keSkgbXNnLmJvZHkgPSB7fTsKCiAgICAgIG1zZy5ib2R5LnZpYSA9IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkw7CiAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vcGVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb3BlbihjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLl9jb250aW51b3VzT3BlbikgewogICAgICAgIC8vVE9ETzogc2VuZCBzdGF0dXMgKHNlbnQgbWVzc2FnZSBlcnJvciAtIGRpc2Nvbm5lY3RlZCkKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghX3RoaXMuX3NvY2spIHsKICAgICAgICBpZiAoX3RoaXMuX2NvbmZpZy51cmwuc3Vic3RyaW5nKDAsIDIpID09PSAnd3MnKSB7CiAgICAgICAgICBfdGhpcy5fc29jayA9IG5ldyBXZWJTb2NrZXQoX3RoaXMuX2NvbmZpZy51cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5fc29jayA9IG5ldyBTb2NrSlMoX3RoaXMuX2NvbmZpZy51cmwpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuX3NvY2sub25vcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuX3NlbmRPcGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIF90aGlzLl9zb2NrLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgbXNnID0gSlNPTi5wYXJzZShlLmRhdGEpOwogICAgICAgICAgaWYgKG1zZy5mcm9tID09PSAnbW46L3Nlc3Npb24nKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5fc2Vzc2lvbkNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgX3RoaXMuX3Nlc3Npb25DYWxsYmFjayhtc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5fZGVsaXZlcihtc2cpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIF90aGlzLl9zb2NrLm9uY2xvc2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHZhciByZWFzb24gPSB1bmRlZmluZWQ7CgogICAgICAgICAgLy9TZWUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY0NTUjc2VjdGlvbi03LjQKICAgICAgICAgIGlmIChldmVudC5jb2RlID09PSAxMDAwKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdOb3JtYWwgY2xvc3VyZSwgbWVhbmluZyB0aGF0IHRoZSBwdXJwb3NlIGZvciB3aGljaCB0aGUgY29ubmVjdGlvbiB3YXMgZXN0YWJsaXNoZWQgaGFzIGJlZW4gZnVsZmlsbGVkLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDEpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIFwnZ29pbmcgYXdheVwnLCBzdWNoIGFzIGEgc2VydmVyIGdvaW5nIGRvd24gb3IgYSBicm93c2VyIGhhdmluZyBuYXZpZ2F0ZWQgYXdheSBmcm9tIGEgcGFnZS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDAyKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBkdWUgdG8gYSBwcm90b2NvbCBlcnJvcic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDMpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgdHlwZSBvZiBkYXRhIGl0IGNhbm5vdCBhY2NlcHQgKGUuZy4sIGFuIGVuZHBvaW50IHRoYXQgdW5kZXJzdGFuZHMgb25seSB0ZXh0IGRhdGEgTUFZIHNlbmQgdGhpcyBpZiBpdCByZWNlaXZlcyBhIGJpbmFyeSBtZXNzYWdlKS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA0KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdSZXNlcnZlZC4gVGhlIHNwZWNpZmljIG1lYW5pbmcgbWlnaHQgYmUgZGVmaW5lZCBpbiB0aGUgZnV0dXJlLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDUpIHsKICAgICAgICAgICAgcmVhc29uID0gJ05vIHN0YXR1cyBjb2RlIHdhcyBhY3R1YWxseSBwcmVzZW50Lic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDYpIHsKICAgICAgICAgICAgcmVhc29uID0gJ1RoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgYWJub3JtYWxseSwgZS5nLiwgd2l0aG91dCBzZW5kaW5nIG9yIHJlY2VpdmluZyBhIENsb3NlIGNvbnRyb2wgZnJhbWUnOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA3KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBkYXRhIHdpdGhpbiBhIG1lc3NhZ2UgdGhhdCB3YXMgbm90IGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBvZiB0aGUgbWVzc2FnZSAoZS5nLiwgbm9uLVVURi04IFtodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNjI5XSBkYXRhIHdpdGhpbiBhIHRleHQgbWVzc2FnZSkuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwOCkgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSBtZXNzYWdlIHRoYXQgInZpb2xhdGVzIGl0cyBwb2xpY3kiLiBUaGlzIHJlYXNvbiBpcyBnaXZlbiBlaXRoZXIgaWYgdGhlcmUgaXMgbm8gb3RoZXIgc3V0aWJsZSByZWFzb24sIG9yIGlmIHRoZXJlIGlzIGEgbmVlZCB0byBoaWRlIHNwZWNpZmljIGRldGFpbHMgYWJvdXQgdGhlIHBvbGljeS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA5KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBhIG1lc3NhZ2UgdGhhdCBpcyB0b28gYmlnIGZvciBpdCB0byBwcm9jZXNzLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMTApIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IChjbGllbnQpIGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIGV4cGVjdGVkIHRoZSBzZXJ2ZXIgdG8gbmVnb3RpYXRlIG9uZSBvciBtb3JlIGV4dGVuc2lvbiwgYnV0IHRoZSBzZXJ2ZXIgZGlkblwndCByZXR1cm4gdGhlbSBpbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSBvZiB0aGUgV2ViU29ja2V0IGhhbmRzaGFrZS4gPGJyIC8+IFNwZWNpZmljYWxseSwgdGhlIGV4dGVuc2lvbnMgdGhhdCBhcmUgbmVlZGVkIGFyZTogJyArIGV2ZW50LnJlYXNvbjsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAxMSkgewogICAgICAgICAgICByZWFzb24gPSAnQSBzZXJ2ZXIgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBlbmNvdW50ZXJlZCBhbiB1bmV4cGVjdGVkIGNvbmRpdGlvbiB0aGF0IHByZXZlbnRlZCBpdCBmcm9tIGZ1bGZpbGxpbmcgdGhlIHJlcXVlc3QuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAxNSkgewogICAgICAgICAgICByZWFzb24gPSAnVGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCBkdWUgdG8gYSBmYWlsdXJlIHRvIHBlcmZvcm0gYSBUTFMgaGFuZHNoYWtlIChlLmcuLCB0aGUgc2VydmVyIGNlcnRpZmljYXRlIGNhblwndCBiZSB2ZXJpZmllZCkuJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdVbmtub3duIHJlYXNvbic7CiAgICAgICAgICB9CgogICAgICAgICAgZGVsZXRlIF90aGlzLl9zb2NrOwogICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsIHJlYXNvbik7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5fd2FpdFJlYWR5KGNhbGxiYWNrKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ2NvbmZpZycsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdydW50aW1lU2Vzc2lvbicsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVTZXNzaW9uVVJMOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFZlcnR4UHJvdG9TdHViOwp9KSgpOwoKZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogIHJldHVybiB7CiAgICBuYW1lOiAnVmVydHhQcm90b1N0dWInLAogICAgaW5zdGFuY2U6IG5ldyBWZXJ0eFByb3RvU3R1Yih1cmwsIGJ1cywgY29uZmlnKQogIH07Cn0KCi8qKgoqIENhbGxiYWNrIHVzZWQgdG8gc2VuZCBtZXNzYWdlcwoqIEBjYWxsYmFjayBQb3N0TWVzc2FnZQoqIEBwYXJhbSB7TWVzc2FnZX0gbXNnIC0gTWVzc2FnZSB0byBzZW5kCiovCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV19LHt9LFsxXSkoMSkKfSk7",
      "sourceCodeClassname": "VertxProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "configuration": {
      "url": "wss://msg-node.localhost:9090/ws"
    },
    "constraints": "",
    "hypertyCapabilities": "",
    "protocolCapabilities": "",
    "policies": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "mtproxy.com": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLy8gU291cmNlIGh0dHBzOi8vbWFydGludGhvbXNvbi5naXRodWIuaW8vLndlbGwta25vd24vaWRwLXByb3h5L2lkcC5qcwoKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTsKCmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGFjdGl2YXRlOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9CgpmdW5jdGlvbiBEQigpIHsKICB0aGlzLnN0b3JlXyA9IHt9Owp9CkRCLnByb3RvdHlwZSA9IHsKICBwdXQ6IGZ1bmN0aW9uIHB1dChrLCB2KSB7CiAgICB0aGlzLnN0b3JlX1trXSA9IHY7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgfSwKICBnZXQ6IGZ1bmN0aW9uIGdldChrKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuc3RvcmVfW2tdKTsKICB9Cn07CgovLyBCYXNlNjQgVVJMLiAgQWdhaW4uCnZhciBiYXNlNjQgPSB7CiAgX3N0cm1hcDogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5LV8nLAogIGVuY29kZTogZnVuY3Rpb24gZW5jb2RlKGRhdGEpIHsKICAgIGRhdGEgPSBuZXcgVWludDhBcnJheShkYXRhKTsKICAgIHZhciByID0gW107CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOykgewogICAgICByLnB1c2goZGF0YVtpXSA+Pj4gMik7CiAgICAgIHIucHVzaCgoZGF0YVtpKytdICYgMHgzKSA8PCA0IHwgZGF0YVtpXSA+Pj4gNCk7CiAgICAgIHIucHVzaCgoZGF0YVtpKytdICYgMHhmKSA8PCAyIHwgZGF0YVtpXSA+Pj4gNik7CiAgICAgIHIucHVzaChkYXRhW2krK10gJiAweDNmKTsKICAgIH0KICAgIHJldHVybiByLm1hcChmdW5jdGlvbiAodikgewogICAgICByZXR1cm4gYmFzZTY0Ll9zdHJtYXBbdl07CiAgICB9KS5qb2luKCcnKS5zbGljZSgwLCBNYXRoLmNlaWwoZGF0YS5sZW5ndGggKiA0IC8gMykpOwogIH0sCiAgX2xvb2t1cDogZnVuY3Rpb24gX2xvb2t1cChzLCBpKSB7CiAgICByZXR1cm4gYmFzZTY0Ll9zdHJtYXAuaW5kZXhPZihzLmNoYXJBdChpKSk7CiAgfSwKICBkZWNvZGU6IGZ1bmN0aW9uIGRlY29kZShzdHIpIHsKICAgIHZhciB2ID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5mbG9vcihzdHIubGVuZ3RoICogMyAvIDQpKTsKICAgIHZhciB2aSA9IDA7CiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3RyLmxlbmd0aDspIHsKICAgICAgdmFyIHcgPSBiYXNlNjQuX2xvb2t1cChzdHIsIHNpKyspOwogICAgICB2YXIgeCA9IGJhc2U2NC5fbG9va3VwKHN0ciwgc2krKyk7CiAgICAgIHZhciB5ID0gYmFzZTY0Ll9sb29rdXAoc3RyLCBzaSsrKTsKICAgICAgdmFyIHogPSBiYXNlNjQuX2xvb2t1cChzdHIsIHNpKyspOwogICAgICB2W3ZpKytdID0gdyA8PCAyIHwgeCA+Pj4gNDsKICAgICAgdlt2aSsrXSA9IHggPDwgNCB8IHkgPj4+IDI7CiAgICAgIHZbdmkrK10gPSB5IDw8IDYgfCB6OwogICAgfQogICAgcmV0dXJuIHY7CiAgfQp9OwoKUHJvbWlzZS5hbGxtYXAgPSBmdW5jdGlvbiAobykgewogIHZhciByZXN1bHQgPSB7fTsKICByZXR1cm4gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMobykubWFwKGZ1bmN0aW9uIChrKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG9ba10pLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgcmV0dXJuIHJlc3VsdFtrXSA9IHI7CiAgICB9KTsKICB9KSkudGhlbihmdW5jdGlvbiAoXykgewogICAgcmV0dXJuIHJlc3VsdDsKICB9KTsKfTsKCnZhciBwYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7CnZhciBpZHBEZXRhaWxzID0gewogIHByb3RvY29sOiBwYXRoLnN1YnN0cmluZyhwYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxKSArIGxvY2F0aW9uLmhhc2gsCiAgZG9tYWluOiBsb2NhdGlvbi5ob3N0Cn07CnZhciB1dGY4ID0gZnVuY3Rpb24gdXRmOChzKSB7CiAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigndXRmLTgnKS5lbmNvZGUocyk7Cn07Cgp2YXIgaWRwID0gewogIGdlbmVyYXRlQXNzZXJ0aW9uOiBmdW5jdGlvbiBnZW5lcmF0ZUFzc2VydGlvbihjb250ZW50cyAvKiwgb3JpZ2luLCBoaW50ICovKSB7CiAgICB2YXIgZGIgPSBuZXcgREIoJ2lkcGtleXN0b3JlJywgJ2tleXMnKTsKICAgIHJldHVybiBkYi5nZXQoJ2tleXBhaXInKS50aGVuKGZ1bmN0aW9uIChwYWlyKSB7CiAgICAgIHJldHVybiBwYWlyIHx8IGNyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoeyBuYW1lOiAnRUNEU0EnLCBuYW1lZEN1cnZlOiAnUC0yNTYnIH0sIGZhbHNlLCBbJ3NpZ24nXSk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChwYWlyKSB7CiAgICAgIHJldHVybiBQcm9taXNlLmFsbG1hcCh7CiAgICAgICAgLy8gVGhlIGlkZW50aXR5IGlzIHRoZSByYXcgcHVibGljIGtleS4KICAgICAgICBwdWI6IGNyeXB0by5zdWJ0bGUuZXhwb3J0S2V5KCdyYXcnLCBwYWlyLnB1YmxpY0tleSksCgogICAgICAgIC8vIFNpZ24gdGhlIGNvbnRlbnRzCiAgICAgICAgc2lnbmF0dXJlOiBjcnlwdG8uc3VidGxlLnNpZ24oeyBuYW1lOiAnRUNEU0EnLCBoYXNoOiAnU0hBLTI1NicgfSwgcGFpci5wcml2YXRlS2V5LCB1dGY4KGNvbnRlbnRzKSkKICAgICAgfSk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgdmFyIHJ2YWwgPSB7CiAgICAgICAgaWRwOiBpZHBEZXRhaWxzLAogICAgICAgIGFzc2VydGlvbjogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgY29udGVudHM6IGNvbnRlbnRzLAogICAgICAgICAgcHViOiBiYXNlNjQuZW5jb2RlKHJlc3VsdC5wdWIpLAogICAgICAgICAgc2lnbmF0dXJlOiBiYXNlNjQuZW5jb2RlKHJlc3VsdC5zaWduYXR1cmUpCiAgICAgICAgfSkKICAgICAgfTsKICAgICAgZHVtcCgnYXNzZXJ0aW9uOiAnICsgSlNPTi5zdHJpbmdpZnkocnZhbCkgKyAnXG4nKTsKICAgICAgcmV0dXJuIHJ2YWw7CiAgICB9KTsKICB9LAoKICB2YWxpZGF0ZUFzc2VydGlvbjogZnVuY3Rpb24gdmFsaWRhdGVBc3NlcnRpb24oYXNzZXJ0aW9uIC8qLCBvcmlnaW4gKi8pIHsKICAgIHZhciBhc3NlcnRpb24gPSBKU09OLnBhcnNlKGFzc2VydGlvbik7IC8vIGxldCB0aGlzIHRocm93CiAgICByZXR1cm4gY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoJ3JhdycsIGJhc2U2NC5kZWNvZGUoYXNzZXJ0aW9uLnB1YiksIHsgbmFtZTogJ0VDRFNBJywgbmFtZWRDdXJ2ZTogJ1AtMjU2JyB9LCB0cnVlLCBbJ3ZlcmlmeSddKS50aGVuKGZ1bmN0aW9uIChwdWJLZXkpIHsKICAgICAgcmV0dXJuIFByb21pc2UuYWxsbWFwKHsKICAgICAgICAvLyBWZXJpZnkgdGhlIHNpZ25hdHVyZQogICAgICAgIG9rOiBjcnlwdG8uc3VidGxlLnZlcmlmeSh7IG5hbWU6ICdFQ0RTQScsIGhhc2g6ICdTSEEtMjU2JyB9LCBwdWJLZXksIGJhc2U2NC5kZWNvZGUoYXNzZXJ0aW9uLnNpZ25hdHVyZSksIHV0ZjgoYXNzZXJ0aW9uLmNvbnRlbnRzKSksCgogICAgICAgIC8vIE1ha2UgdGhlIGlkZW50aXR5IGEgY29tcHJlc3NlZCBmb3JtIG9mIHRoZSBwdWJsaWMga2V5LgogICAgICAgIGlkOiBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIHV0ZjgoYXNzZXJ0aW9uLnB1YikpLnRoZW4oZnVuY3Rpb24gKHJhdykgewogICAgICAgICAgcmV0dXJuIGJhc2U2NC5lbmNvZGUocmF3LnNsaWNlKDAsIDEyKSk7CiAgICAgICAgfSkKICAgICAgfSk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgaWYgKCFyZXN1bHQub2spIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2lnbmF0dXJlIG9uIGlkZW50aXR5IGFzc2VydGlvbicpOwogICAgICB9CiAgICAgIHZhciBydmFsID0gewogICAgICAgIGlkZW50aXR5OiByZXN1bHQuaWQgKyAnQCcgKyBpZHBEZXRhaWxzLmRvbWFpbiwKICAgICAgICBjb250ZW50czogYXNzZXJ0aW9uLmNvbnRlbnRzCiAgICAgIH07CiAgICAgIGR1bXAoJ2Fzc2VydGlvbjogJyArIEpTT04uc3RyaW5naWZ5KHJ2YWwpICsgJ1xuJyk7CiAgICAgIHJldHVybiBydmFsOwogICAgfSk7CiAgfQp9OwoKLyoKaWYgKHJ0Y0lkZW50aXR5UHJvdmlkZXIpIHsKICBydGNJZGVudGl0eVByb3ZpZGVyLnJlZ2lzdGVyKGlkcCk7Cn0gZWxzZSB7CiAgY29uc29sZS53YXJuKCdJZFAgbm90IHJ1bm5pbmcgaW4gdGhlIHJpZ2h0IHNhbmRib3gnKTsKfSovCgovKioKKiBJZGVudGl0eSBQcm92aWRlciBQcm94eSBQcm90b2NvbCBTdHViCiovCgp2YXIgTXRwcm94eVByb3RvU3R1YiA9IChmdW5jdGlvbiAoKSB7CgogIC8qKgogICogQ29uc3RydWN0b3Igb2YgdGhlIElkcFByb3h5IFN0dWIKICAqIFRoZSBjb25zdHJ1Y3RvciBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgbWVzc2FnZUJ1cyByZWNlaXZlZCBhbmQgc3RhcnQgYSB3ZWIgd29ya2VyIHdpdGggdGhlIGlkcFByb3h5IHJlY2VpdmVkCiAgKgogICogQHBhcmFtICB7VVJMLlJ1bnRpbWVVUkx9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMCiAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9ICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzUG9zdE1lc3NhZ2UgICAgIGNvbmZpZ3VyYXRpb24KICAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbgogICovCgogIGZ1bmN0aW9uIE10cHJveHlQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNdHByb3h5UHJvdG9TdHViKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgX3RoaXMucnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICBfdGhpcy5tZXNzYWdlQnVzID0gYnVzOwogICAgX3RoaXMuY29uZmlnID0gY29uZmlnOwoKICAgIF90aGlzLm1lc3NhZ2VCdXMuYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbiAobXNnKSB7CiAgICAgIGlmIChtc2cudG8gPT0gJ2RvbWFpbjovL210cHJveHkuY29tJykgewogICAgICAgIC8qbGV0IG5ld1ZhbHVlID0gSWRwUHJveHkuZ2VuZXJhdGVBc3NlcnRpb24oKTsKICAgICAgICBsZXQgbWVzc2FnZSA9IHtpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCB0bzogbXNnLmZyb20sIGZyb206IG1zZy50bywKICAgICAgICAgICAgICAgICAgICAgICBib2R5OiB7Y29kZTogMjAwLCB2YWx1ZTogbmV3VmFsdWUsIGJ1czogYnVzLCBydW50aW1lUHJvdG9TdHViVVJMOiBydW50aW1lUHJvdG9TdHViVVJMfX07CiAgICAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSk7Ki8KICAgICAgICBfdGhpcy5yZXF1ZXN0VG9JZHAobXNnKTsKICAgICAgfQogICAgfSk7CiAgfQoKICAvLyBleHBvcnQgZGVmYXVsdCBJZHBQcm94eVByb3RvU3R1YjsKCiAgLyoqCiAgICogVG8gYWN0aXZhdGUgdGhpcyBwcm90b2NvbCBzdHViLCB1c2luZyB0aGUgc2FtZSBtZXRob2QgZm9yIGFsbCBwcm90b3N0dWIuCiAgICogQHBhcmFtICB7VVJMLlJ1bnRpbWVVUkx9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMCiAgICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uCiAgICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uCiAgICogQHJldHVybiB7T2JqZWN0fSBPYmplY3Qgd2l0aCBuYW1lIGFuZCBpbnN0YW5jZSBvZiBQcm90b1N0dWIKICAgKi8KCiAgLyoqCiAgKiBGdW5jdGlvbiB0aGF0IHNlZSB0aGUgaW50ZW5kZWQgbWV0aG9kIGluIHRoZSBtZXNzYWdlIHJlY2VpdmVkIGFuZCBjYWxsIHRoZSByZXNwZWN0aXZlIGZ1bmN0aW9uCiAgKgogICogQHBhcmFtIHttZXNzYWdlfSAgbWVzc2FnZSByZWNlaXZlZCBpbiB0aGUgbWVzc2FnZUJ1cwogICovCgogIF9jcmVhdGVDbGFzcyhNdHByb3h5UHJvdG9TdHViLCBbewogICAga2V5OiAncmVxdWVzdFRvSWRwJywKICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0VG9JZHAobXNnKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBwYXJhbXMgPSBtc2cuYm9keS5wYXJhbXM7CgogICAgICBzd2l0Y2ggKG1zZy5ib2R5Lm1ldGhvZCkgewogICAgICAgIGNhc2UgJ2dlbmVyYXRlQXNzZXJ0aW9uJzoKICAgICAgICAgIGlkcC5nZW5lcmF0ZUFzc2VydGlvbihwYXJhbXMuY29udGVudHMsIHBhcmFtcy5vcmlnaW4sIHBhcmFtcy51c2VybmFtZUhpbnQpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIHZhbHVlKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCBlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ3ZhbGlkYXRlQXNzZXJ0aW9uJzoKICAgICAgICAgIGlkcC52YWxpZGF0ZUFzc2VydGlvbihwYXJhbXMuYXNzZXJ0aW9uLCBwYXJhbXMub3JpZ2luKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCB2YWx1ZSk7CiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgZXJyb3IpOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogVGhpcyBmdW5jdGlvbiByZWNlaXZlcyBhIG1lc3NhZ2UgYW5kIGEgdmFsdWUuIEl0IHJlcGxpZXMgdGhlIHZhbHVlIHRvIHRoZSBzZW5kZXIgb2YgdGhlIG1lc3NhZ2UgcmVjZWl2ZWQKICAgICoKICAgICogQHBhcmFtICB7bWVzc2FnZX0gICBtZXNzYWdlIHJlY2VpdmVkCiAgICAqIEBwYXJhbSAge3ZhbHVlfSAgICAgdmFsdWUgdG8gaW5jbHVkZSBpbiB0aGUgbmV3IG1lc3NhZ2UgdG8gc2VuZAogICAgKi8KICB9LCB7CiAgICBrZXk6ICdyZXBseU1lc3NhZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGx5TWVzc2FnZShtc2csIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbWVzc2FnZSA9IHsgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sCiAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHZhbHVlOiB2YWx1ZSB9IH07CgogICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIE10cHJveHlQcm90b1N0dWI7Cn0pKCk7CgpmdW5jdGlvbiBhY3RpdmF0ZSh1cmwsIGJ1cywgY29uZmlnKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6ICdNdHByb3h5UHJvdG9TdHViJywKICAgIGluc3RhbmNlOiBuZXcgTXRwcm94eVByb3RvU3R1Yih1cmwsIGJ1cywgY29uZmlnKQogIH07Cn0KCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV19LHt9LFsxXSkoMSkKfSk7",
      "sourceCodeClassname": "MtproxyProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of MtproxyProtoStub",
    "objectName": "MtproxyProtoStub",
    "configuration": {},
    "constraints": "",
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "orange.com": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKLyoqCiogSWRlbnRpdHlQcm94eSAtLSBOT0RFIE9QRU5JRCBDT05ORUNUIFNlcnZlcgoqCiogSW5pdGlhbCBzcGVjaWZpY2F0aW9uOiBENC4xCioKKiBUaGUgSWRlbnRpdHlNb2R1bGUgaXMgYSBjb21wb25lbnQgbWFuYWdpbmcgdXNlciBJZGVudGl0eS4gSXQgZG93bmxvYWRzLCBpbnN0YW50aWF0ZXMKKiBhbmQgbWFuYWdlIElkZW50aXR5IFByb3ZpZGVyIFByb3h5IChJZFApIGZvciBpdHMgb3duIHVzZXIgaWRlbnRpdHkgb3IgZm9yIGV4dGVybmFsCiogdXNlciBpZGVudGl0eSB2ZXJpZmljYXRpb24uCioKKiBUaGUgSWRQIGNvbnRhaW5zIG1ldGhvZHMgYW5kIHBhcmFtZXRlcnMgdG8gYWN0dWFsbHkgYWNjZXNzIGFuZCBtYWtlIHJlcXVlc3QKKiB0byB0aGUgSWRQIFNlcnZlci4gQWx0ZXJuYXRpdmVseSBzb21lIGZ1bmN0aW9ubmFsaXRpZXMgY2FuIGJlIGRvbmUgbG9jYWxseS4KKgoqLwoidXNlIHN0cmljdCI7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7Cgp2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpOwoKZXhwb3J0c1siZGVmYXVsdCJdID0gYWN0aXZhdGU7CgpmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOyB9IH0KCnZhciBTT1VSQ0VVUkwgPSAiaHR0cHM6Ly9lbmVyZ3lxLmlkcC5yZXRoaW5rLm9yYW5nZS1sYWJzLmZyIiwKICAgIEFVVEhQQVRIID0gIi9wcm94eS9hdXRob3JpemUiLAogICAgVkVSSUZZUEFUSCA9ICIvcHJveHkvdmVyaWZ5IiwKICAgIERPTkVQQVRIID0gIi9wcm94eS9kb25lIiwKICAgIEtFWVBBVEggPSAnL3Byb3h5L2tleScsCiAgICBJRFBBVEggPSAnL3Byb3h5L2lkJywKICAgIFBST1hZVFlQRSA9ICJyZXRoaW5rLW9pZGMiLAogICAgSURTQ09QRSA9ICJvcGVuaWQiLAogICAgRlVMTFNDT1BFID0gIm9wZW5pZCB3ZWJydGMiLAogICAgVFlQRSA9ICdpZF90b2tlbiB0b2tlbic7Ci8vdmFyIFRZUEUgICAgICAgPSAgICdjb2RlJzsKCnZhciBpZHBfYWRkciA9IHsgJ2RvbWFpbic6ICJodHRwczovL2VuZXJneXEuaWRwLnJldGhpbmsub3JhbmdlLWxhYnMuZnIiLCAncHJvdG9jb2wnOiBQUk9YWVRZUEUgfTsKCmlmICh0eXBlb2YgY29uc29sZSA9PSAidW5kZWZpbmVkIikgewogIHVuZGVmaW5lZC5jb25zb2xlID0gewogICAgbG9nOiBmdW5jdGlvbiBsb2coKSB7fQogIH07Cn0KCmZ1bmN0aW9uIGdldFByb3h5S2V5KCkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiB4bWxodHRwLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICB2YXIgcmVzID0gSlNPTi5wYXJzZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgcmVzLmVycm9yICE9IHVuZGVmaW5lZCA/IHJlamVjdChyZXMuZXJyb3IpIDogcmVzb2x2ZShyZXMpOwogICAgICB9CiAgICB9OwogICAgeG1saHR0cC5vcGVuKCJHRVQiLCBTT1VSQ0VVUkwgKyBLRVlQQVRILCB0cnVlKTsKICAgIHhtbGh0dHAuc2VuZCgpOwogIH0pOwp9ZnVuY3Rpb24gZ2V0UHJveHlJRCgpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IDQgJiYgeG1saHR0cC5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgdmFyIHJlcyA9IEpTT04ucGFyc2UoeG1saHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgIHJlcy5lcnJvciAhPSB1bmRlZmluZWQgPyByZWplY3QocmVzLmVycm9yKSA6IHJlc29sdmUocmVzLmtleSk7CiAgICAgIH0KICAgIH07CiAgICB4bWxodHRwLm9wZW4oIkdFVCIsIFNPVVJDRVVSTCArIElEUEFUSCwgdHJ1ZSk7CiAgICB4bWxodHRwLnNlbmQoKTsKICB9KTsKfQpmdW5jdGlvbiBnZXRJZEFzc2VydGlvbigpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IDQgJiYgeG1saHR0cC5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgdmFyIHJlcyA9IEpTT04ucGFyc2UoeG1saHR0cC5yZXNwb25zZVRleHQpOwogICAgICAgIHJlcy5lcnJvciAhPSB1bmRlZmluZWQgPyByZWplY3QocmVzLmVycm9yKSA6IHJlc29sdmUocmVzLmtleSk7CiAgICAgIH0KICAgIH07CiAgICB4bWxodHRwLm9wZW4oIkdFVCIsIFNPVVJDRVVSTCArIElEUEFUSCwgdHJ1ZSk7CiAgICB4bWxodHRwLnNlbmQoKTsKICB9KTsKfQpmdW5jdGlvbiBzdHIyYWIoc3RyKSB7CiAgdmFyIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihzdHIubGVuZ3RoKTsKICB2YXIgYnVmVmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zik7CiAgZm9yICh2YXIgaSA9IDAsIHN0ckxlbiA9IHN0ci5sZW5ndGg7IGkgPCBzdHJMZW47IGkrKykgewogICAgYnVmVmlld1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpOwogIH0KICByZXR1cm4gYnVmOwp9CgpmdW5jdGlvbiBhYjJzdHIoYnVmKSB7CiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoYnVmKSk7Cn0KCi8vIElEUCBQcm94eSBjb2RlCnZhciBpZHAgPSB7CiAgLyoqCiAgKiBHZW5lcmF0aW9uIG9mIGFuIElkQXNzZXJ0aW9uIHRocm91Z2ggT0lEQyBJZFAKICAqLwogIGdlbmVyYXRlQXNzZXJ0aW9uOiBmdW5jdGlvbiBnZW5lcmF0ZUFzc2VydGlvbihjb250ZW50cyAvKiwgb3JpZ2luLCBoaW50ICovKSB7CiAgICAvLyBUT0RPIDogc2lnbiBjb250ZW50cyBpbiB0aGUgSWQgVG9rZW4KICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHJldHVybiBnZXRQcm94eUlEKCkudGhlbihmdW5jdGlvbiAoSUQpIHsKICAgICAgICB2YXIgX3VybCA9IFNPVVJDRVVSTCArIEFVVEhQQVRIICsgJz9zY29wZT0nICsgRlVMTFNDT1BFICsgJyZjbGllbnRfaWQ9JyArIElEICsgJyZyZWRpcmVjdF91cmk9JyArIFNPVVJDRVVSTCArIERPTkVQQVRIICsgJyZyZXNwb25zZV90eXBlPScgKyBUWVBFICsgJyZub25jZT0nICsgJ04tJyArIE1hdGgucmFuZG9tKCkgKyAnJnJ0Y3NkcD0nICsgYnRvYShjb250ZW50cyk7CiAgICAgICAgdmFyIG15SW5pdCA9IHsgbWV0aG9kOiAnR0VUJywKICAgICAgICAgIC8vaGVhZGVyczogbXlIZWFkZXJzLAogICAgICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicsCiAgICAgICAgICAvLyB3ZSBkb24ndCBmb2xsb3cgcmVkaXJlY3Qgc28gdGhhdCBpZiB1c2VyIGlzIG5vdCBsb2dnZWQgKHJlZGlyZWN0KQogICAgICAgICAgLy8gd2UgZ2V0IGFuIGVycm9yIGFuIGNhbiByZXR1cm4gbG9naW4gVVJMIHRvIHRoZSBhcHBsaWNhdGlvbgogICAgICAgICAgcmVkaXJlY3Q6ICdlcnJvcicgfTsKICAgICAgICAvL3ZhciB1cmxXID0gJ2h0dHBzOi8vbG9jYWxob3N0OjgwODAvcHJveHkvYXV0aG9yaXplP3Njb3BlPW9wZW5pZCZjbGllbnRfaWQ9TFMwdExTMUNSVWRKVGlCUVZVSk1TVU1nUzBWWkxTMHRMUzBLVFVsSFprMUJNRWREVTNGSFUwbGlNMFJSUlVKQlVWVkJRVFJIVGtGRVEwSnBVVXRDWjFGRFkwVm5ja3gwV1ZSSVVIQXZkSEZDUTNCVUwxVXdTMWRKVFFvMGQybGthR05GV0VkMVVrWkNaRE4zVGxwUFkwaHVNblJGYW5aYVRraG1jM052VVhSMFVqQk9WRVExVVNzNVVHUjBUV1pKVEZoeFUzRTNWM2h0TWs1c0NrTmhOWEpUVkhwbVQxazVOV2haUW1zM1VWQlpkVE42ZEVWUVVIVk9RM0IxTWxkNlFsUTJaR2c0WVhwVk9HVXZSSFpZVjJSd2JIcFhkbXB1VG1kdVZHSUtTSFpPSzAxUFdVODRTR2hMTWtaV1IyRjNTVVJCVVVGQ0NpMHRMUzB0UlU1RUlGQlZRa3hKUXlCTFJWa3RMUzB0TFFvPSZyZWRpcmVjdF91cmk9aHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MC9wcm94eS9kb25lJnJlc3BvbnNlX3R5cGU9aWRfdG9rZW4lMjB0b2tlbiZub25jZT1OLTAuOTMxNjc4NTY5OTE2MjM0MicKCiAgICAgICAgZmV0Y2goX3VybCwgbXlJbml0KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChoYXNoKSB7CiAgICAgICAgICBkdW1wKGhhc2gpOwogICAgICAgICAgdmFyIGpzb24gPSB7fTsKICAgICAgICAgIHZhciBkYXRhID0gaGFzaC5zcGxpdCgnJicpLnRvU3RyaW5nKCkuc3BsaXQoL1s9LF0rLyk7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgICAganNvbltkYXRhW2ldXSA9IGRhdGFbaSArIDFdOwogICAgICAgICAgfQoKICAgICAgICAgIHJlc29sdmUoeyAnYXNzZXJ0aW9uJzoganNvbi5pZF90b2tlbiwgJ2lkcCc6IGlkcF9hZGRyIH0pOwogICAgICAgIH0pOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAvLyBXZSBqdXN0IGxvZ2luIGJ1dCB3ZSBjb3VsZCBkbyBzb21ldGhpbmcgYmV0dGVyIG1heWJlPwogICAgICAgIC8vIEhhbmRsaW5nIGF1dGhvcml6YXRpb25zIGFuZCBzdWNoCiAgICAgICAgdmFyIGxvZ2luVVJMID0gU09VUkNFVVJMICsgJy9sb2dpbic7CiAgICAgICAgcmVqZWN0KHsgJ25hbWUnOiAnSWRQTG9naW5FcnJvcicsICdsb2dpblVybCc6IGxvZ2luVVJMIH0pOwogICAgICB9KTsKICAgIH0KICAgIC8vICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgb3BlbiBhIHdpbmRvdyB3aXRoIHRoZSBVUkwgd2hpY2ggd2lsbCBvcGVuIGEgcGFnZQogICAgLy8gICAgICAgICAgICAgIC8vIHNlbnQgYnkgSWRQIGZvciB0aGUgdXNlciB0byBpbnNlcnQgdGhlIGNyZWRlbnRpYWxzCiAgICAvLyAgICAgICAgICAgICAgLy8gdGhlIElkUCB2YWxpZGF0ZXMgdGhlIGNyZWRlbnRpYWxzIHRoZW4gc2VuZCBhIGFjY2VzcyB0b2tlbgogICAgLy8gICAgICAgICAgd2luZG93Lm9wZW4oX3VybCwgJ29wZW5JRHJlcXVlc3QnLCAnd2lkdGg9ODAwLCBoZWlnaHQ9NjAwJykKICAgIC8vICAgICAgICAgICAgICAvLyByZXNwb25kIHRvIGV2ZW50cwogICAgLy8gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZXZlbnQgPT4gewogICAgLy8gICAgICAgICAgICBpZihldmVudC5vcmlnaW4gIT09IFNPVVJDRVVSTCkgcmV0dXJuOwogICAgLy8KICAgIC8vICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKGV2ZW50LmRhdGEpLmlkX3Rva2VuKQogICAgLy8gICAgICAgICAgICAvL2lkcC52YWxpZGF0ZUFzc2VydGlvbihyZXMuaWRfdG9rZW4pLnRoZW4oCiAgICAvLyAgICAgICAgICAgIC8vICAgIHJlc3BvbnNlID0+IHJlc29sdmUocmVzcG9uc2UpLCBlcnJvciA9PiByZWplY3QoZXJyb3IpKQogICAgLy8gICAgICAgICAgfSxmYWxzZSkKICAgICk7CiAgfSwKICAvKioKICAqIFZlcmlmaWNhdGlvbiBvZiBhIHJlY2VpdmVkIElkQXNzZXJ0aW9uIHZhbGlkaXR5CiAgKiBDYW4gYWxzbyBiZSB1c2VkIHRvIHZhbGlkYXRlIHRva2VuIHJlY2VpdmVkIGJ5IElkUAogICogQHBhcmFtICB7RE9NU3RyaW5nfSBhc3NlcnRpb24gYXNzZXJ0aW9uCiAgKi8KICB2YWxpZGF0ZUFzc2VydGlvbjogZnVuY3Rpb24gdmFsaWRhdGVBc3NlcnRpb24oYXNzZXJ0aW9uIC8qLCBvcmlnaW4gKi8pIHsKICAgIGFzc2VydGlvbiA9IGFzc2VydGlvbi5zcGxpdCgiLiIpOwogICAgdmFyIGhlYWRlciA9IGFzc2VydGlvblswXSwKICAgICAgICBwYXlsb2FkID0gYXNzZXJ0aW9uWzFdLAogICAgICAgIHNpZ25hdHVyZSA9IGFzc2VydGlvblsyXTsKICAgIC8vVE9ETyB0aGVyZSBpcyBwcm9iYWJseSBhIGJldHRlciB3YXkgdG8gZG8gdGhhdD8KICAgIHNpZ25hdHVyZSA9IHNpZ25hdHVyZS5yZXBsYWNlKC9fL2csICIvIikucmVwbGFjZSgvLS9nLCAiKyIpOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgcmV0dXJuIGdldFByb3h5S2V5KCkudGhlbihmdW5jdGlvbiAoS2V5KSB7CiAgICAgICAgcmV0dXJuIGNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdqd2snLCBLZXksIHsgbmFtZTogJ1JTQVNTQS1QS0NTMS12MV81JywgaGFzaDogeyBuYW1lOiAiU0hBLTI1NiIgfSB9LCB0cnVlLCBbJ3ZlcmlmeSddKS50aGVuKGZ1bmN0aW9uIChKV0spIHsKICAgICAgICAgIHJldHVybigKICAgICAgICAgICAgLy9jcnlwdG8udmVyaWZ5KGFsZ28sIGtleSwgc2lnbmF0dXJlLCB0ZXh0MnZlcmlmeSk7CiAgICAgICAgICAgIGNyeXB0by5zdWJ0bGUudmVyaWZ5KCdSU0FTU0EtUEtDUzEtdjFfNScsIEpXSywgc3RyMmFiKGF0b2Ioc2lnbmF0dXJlKSksIC8vQXJyYXlCdWZmZXIgb2YgdGhlIHNpZ25hdHVyZSwKICAgICAgICAgICAgc3RyMmFiKGhlYWRlciArICIuIiArIHBheWxvYWQpKSAvL0FycmF5QnVmZmVyIG9mIHRoZSBkYXRhCiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkgcmVqZWN0KG5ldyBFcnJvcignSW52YWxpZCBzaWduYXR1cmUgb24gaWRlbnRpdHkgYXNzZXJ0aW9uJykpO2Vsc2UgewogICAgICAgICAgICAgICAgdmFyIGpzb24gPSBKU09OLnBhcnNlKGF0b2IocGF5bG9hZCkpOwogICAgICAgICAgICAgICAgLy8gaGFjayB0byBnZXQgb25seSB0aGUgbmFtZSBhbmQgcmVtb3ZlIGFueSBAbWFpbC5jb20KICAgICAgICAgICAgICAgIC8vIE1vemlsbGEgd2FudCB1cyB0byBwcm92aWRlIGEgdXNlcm5hbWUgd2l0aCBuYW1lQERPTUFJTgogICAgICAgICAgICAgICAgLy8gd2hlcmUgRE9NQUlOIGlzIElkUCBQcm94eSBET01BSU4KICAgICAgICAgICAgICAgIHZhciBuYW1lID0ganNvbi5zdWIuc3BsaXQoJ0AnKVswXTsKICAgICAgICAgICAgICAgIHJlc29sdmUoeyAnaWRlbnRpdHknOiBuYW1lICsgJ0AnICsgaWRwX2FkZHIuZG9tYWluLCAnY29udGVudHMnOiBhdG9iKGpzb24ucnRjc2RwKSB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwogIH0KfTsKCi8qCmlmIChydGNJZGVudGl0eVByb3ZpZGVyKSB7CiAgcnRjSWRlbnRpdHlQcm92aWRlci5yZWdpc3RlcihpZHApOwogIGNvbnNvbGUubG9nKCJQcm94eSBsb2FkZWQiKQp9IGVsc2UgewogIGNvbnNvbGUud2FybignSWRQIG5vdCBydW5uaW5nIGluIHRoZSByaWdodCBzYW5kYm94Jyk7Cn0KKi8KCi8qKgoqIElkZW50aXR5IFByb3ZpZGVyIFByb3h5IFByb3RvY29sIFN0dWIKKi8KCnZhciBSZXRoaW5rT2lkY1Byb3RvU3R1YiA9IChmdW5jdGlvbiAoKSB7CgogIC8qKgogICogQ29uc3RydWN0b3Igb2YgdGhlIElkcFByb3h5IFN0dWIKICAqIFRoZSBjb25zdHJ1Y3RvciBhZGQgYSBsaXN0ZW5lciBpbiB0aGUgbWVzc2FnZUJ1cyByZWNlaXZlZCBhbmQgc3RhcnQgYSB3ZWIgd29ya2VyIHdpdGggdGhlIGlkcFByb3h5IHJlY2VpdmVkCiAgKgogICogQHBhcmFtICB7VVJMLlJ1bnRpbWVVUkx9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMCiAgKiBAcGFyYW0gIHtNZXNzYWdlLk1lc3NhZ2V9ICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVzUG9zdE1lc3NhZ2UgICAgIGNvbmZpZ3VyYXRpb24KICAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbgogICovCgogIGZ1bmN0aW9uIFJldGhpbmtPaWRjUHJvdG9TdHViKHJ1bnRpbWVQcm90b1N0dWJVUkwsIGJ1cywgY29uZmlnKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmV0aGlua09pZGNQcm90b1N0dWIpOwoKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBfdGhpcy5ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKICAgIF90aGlzLm1lc3NhZ2VCdXMgPSBidXM7CiAgICBfdGhpcy5jb25maWcgPSBjb25maWc7CgogICAgX3RoaXMubWVzc2FnZUJ1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgaWYgKG1zZy50byA9PSAnZG9tYWluOi8vb3JhbmdlLmNvbScpIHsKICAgICAgICAvKmxldCBuZXdWYWx1ZSA9IElkcFByb3h5LmdlbmVyYXRlQXNzZXJ0aW9uKCk7CiAgICAgICAgbGV0IG1lc3NhZ2UgPSB7aWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sCiAgICAgICAgICAgICAgICAgICAgICAgYm9keToge2NvZGU6IDIwMCwgdmFsdWU6IG5ld1ZhbHVlLCBidXM6IGJ1cywgcnVudGltZVByb3RvU3R1YlVSTDogcnVudGltZVByb3RvU3R1YlVSTH19OwogICAgICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOyovCiAgICAgICAgX3RoaXMucmVxdWVzdFRvSWRwKG1zZyk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgLy8gZXhwb3J0IGRlZmF1bHQgSWRwUHJveHlQcm90b1N0dWI7CgogIC8qKgogICAqIFRvIGFjdGl2YXRlIHRoaXMgcHJvdG9jb2wgc3R1YiwgdXNpbmcgdGhlIHNhbWUgbWV0aG9kIGZvciBhbGwgcHJvdG9zdHViLgogICAqIEBwYXJhbSAge1VSTC5SdW50aW1lVVJMfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lUHJvdG9TdHViVVJMIHJ1bnRpbWVQcm90b1N1YlVSTAogICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICBidXNQb3N0TWVzc2FnZSAgICAgY29uZmlndXJhdGlvbgogICAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbgogICAqIEByZXR1cm4ge09iamVjdH0gT2JqZWN0IHdpdGggbmFtZSBhbmQgaW5zdGFuY2Ugb2YgUHJvdG9TdHViCiAgICovCgogIC8qKgogICogRnVuY3Rpb24gdGhhdCBzZWUgdGhlIGludGVuZGVkIG1ldGhvZCBpbiB0aGUgbWVzc2FnZSByZWNlaXZlZCBhbmQgY2FsbCB0aGUgcmVzcGVjdGl2ZSBmdW5jdGlvbgogICoKICAqIEBwYXJhbSB7bWVzc2FnZX0gIG1lc3NhZ2UgcmVjZWl2ZWQgaW4gdGhlIG1lc3NhZ2VCdXMKICAqLwoKICBfY3JlYXRlQ2xhc3MoUmV0aGlua09pZGNQcm90b1N0dWIsIFt7CiAgICBrZXk6ICJyZXF1ZXN0VG9JZHAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcXVlc3RUb0lkcChtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHBhcmFtcyA9IG1zZy5ib2R5LnBhcmFtczsKCiAgICAgIHN3aXRjaCAobXNnLmJvZHkubWV0aG9kKSB7CiAgICAgICAgY2FzZSAnZ2VuZXJhdGVBc3NlcnRpb24nOgogICAgICAgICAgaWRwLmdlbmVyYXRlQXNzZXJ0aW9uKHBhcmFtcy5jb250ZW50cywgcGFyYW1zLm9yaWdpbiwgcGFyYW1zLnVzZXJuYW1lSGludCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgdmFsdWUpOwogICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIGVycm9yKTsKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAndmFsaWRhdGVBc3NlcnRpb24nOgogICAgICAgICAgaWRwLnZhbGlkYXRlQXNzZXJ0aW9uKHBhcmFtcy5hc3NlcnRpb24sIHBhcmFtcy5vcmlnaW4pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIF90aGlzLnJlcGx5TWVzc2FnZShtc2csIHZhbHVlKTsKICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCBlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgKiBUaGlzIGZ1bmN0aW9uIHJlY2VpdmVzIGEgbWVzc2FnZSBhbmQgYSB2YWx1ZS4gSXQgcmVwbGllcyB0aGUgdmFsdWUgdG8gdGhlIHNlbmRlciBvZiB0aGUgbWVzc2FnZSByZWNlaXZlZAogICAgKgogICAgKiBAcGFyYW0gIHttZXNzYWdlfSAgIG1lc3NhZ2UgcmVjZWl2ZWQKICAgICogQHBhcmFtICB7dmFsdWV9ICAgICB2YWx1ZSB0byBpbmNsdWRlIGluIHRoZSBuZXcgbWVzc2FnZSB0byBzZW5kCiAgICAqLwogIH0sIHsKICAgIGtleTogInJlcGx5TWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVwbHlNZXNzYWdlKG1zZywgdmFsdWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtZXNzYWdlID0geyBpZDogbXNnLmlkLCB0eXBlOiAncmVzcG9uc2UnLCB0bzogbXNnLmZyb20sIGZyb206IG1zZy50bywKICAgICAgICBib2R5OiB7IGNvZGU6IDIwMCwgdmFsdWU6IHZhbHVlIH0gfTsKCiAgICAgIF90aGlzLm1lc3NhZ2VCdXMucG9zdE1lc3NhZ2UobWVzc2FnZSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUmV0aGlua09pZGNQcm90b1N0dWI7Cn0pKCk7CgpmdW5jdGlvbiBhY3RpdmF0ZSh1cmwsIGJ1cywgY29uZmlnKSB7CiAgcmV0dXJuIHsKICAgIG5hbWU6ICdSZXRoaW5rT2lkY1Byb3RvU3R1YicsCiAgICBpbnN0YW5jZTogbmV3IFJldGhpbmtPaWRjUHJvdG9TdHViKHVybCwgYnVzLCBjb25maWcpCiAgfTsKfQoKbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWyJkZWZhdWx0Il07Cgp9LHt9XX0se30sWzFdKSgxKQp9KTs=",
      "sourceCodeClassname": "RethinkOidcProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of RethinkOidcProtoStub",
    "objectName": "RethinkOidcProtoStub",
    "configuration": {},
    "constraints": "",
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "google.com": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTsKCmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGFjdGl2YXRlOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9Cgp2YXIgaWRlbnRpdGllcyA9IHt9Owp2YXIgbklkZW50aXR5ID0gMDsKCnZhciBnb29nbGVJbmZvID0gewogIGNsaWVudFNlY3JldDogJ1h4NHJLdWNiNVpZVGFYbGNaWDlITGZaVycsCiAgY2xpZW50SUQ6ICc4MDgzMjk1NjYwMTItdHFyOHFvaDExMTk0MmdkMmtnMDA3dDBzOGYyNzdyb2kuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20nLAogIHJlZGlyZWN0VVJJOiBsb2NhdGlvbi5wcm90b2NvbCArICcvLycgKyBsb2NhdGlvbi5ob3N0bmFtZSwgLy9sb2NhdGlvbi5vcmlnaW4sCiAgaXNzdWVyOiAnaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tJywKICB0b2tlbkVuZHBvaW50OiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3Y0L3Rva2VuPycsCiAgandrc1VyaTogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My9jZXJ0cz8nLAogIGF1dGhvcmlzYXRpb25FbmRwb2ludDogJ2h0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoPycsCiAgdXNlcmluZm86ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdXNlcmluZm8/YWNjZXNzX3Rva2VuPScsCiAgdG9rZW5JbmZvOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YzL3Rva2VuaW5mbz9pZF90b2tlbj0nLAogIGFjY2Vzc1R5cGU6ICdvZmZsaW5lJywKICB0eXBlOiAnY29kZSB0b2tlbiBpZF90b2tlbicsCiAgc2NvcGU6ICdvcGVuaWQlMjBlbWFpbCUyMHByb2ZpbGUnLAogIHN0YXRlOiAnc3RhdGUnCn07CgovL2Z1bmN0aW9uIHRvIHBhcnNlIHRoZSBxdWVyeSBzdHJpbmcgaW4gdGhlIGdpdmVuIFVSTCB0byBvYmF0aW4gY2VydGFpbiB2YWx1ZXMKZnVuY3Rpb24gdXJsUGFyc2VyKHVybCwgbmFtZSkgewogIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcW10vLCAnXFxcWycpLnJlcGxhY2UoL1tcXV0vLCAnXFxcXScpOwogIHZhciByZWdleFMgPSAnW1xcIyY/XScgKyBuYW1lICsgJz0oW14mI10qKSc7CiAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleFMpOwogIHZhciByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpOwogIGlmIChyZXN1bHRzID09PSBudWxsKSByZXR1cm4gJyc7ZWxzZSByZXR1cm4gcmVzdWx0c1sxXTsKfQoKZnVuY3Rpb24gc2VuZEhUVFBSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7CiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogIGlmICgnd2l0aENyZWRlbnRpYWxzJyBpbiB4aHIpIHsKICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTsKICB9IGVsc2UgaWYgKHR5cGVvZiBYRG9tYWluUmVxdWVzdCAhPSAndW5kZWZpbmVkJykgewogICAgLy8gT3RoZXJ3aXNlLCBjaGVjayBpZiBYRG9tYWluUmVxdWVzdC4KICAgIC8vIFhEb21haW5SZXF1ZXN0IG9ubHkgZXhpc3RzIGluIElFLCBhbmQgaXMgSUUncyB3YXkgb2YgbWFraW5nIENPUlMgcmVxdWVzdHMuCiAgICB4aHIgPSBuZXcgWERvbWFpblJlcXVlc3QoKTsKICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsKTsKICB9IGVsc2UgewogICAgLy8gT3RoZXJ3aXNlLCBDT1JTIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIuCiAgICB4aHIgPSBudWxsOwogIH0KICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgaWYgKHhocikgewogICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHsKICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgdmFyIGluZm8gPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpOwogICAgICAgICAgICByZXNvbHZlKGluZm8pOwogICAgICAgICAgfSBlbHNlIGlmICh4aHIuc3RhdHVzID09PSA0MDApIHsKICAgICAgICAgICAgcmVqZWN0KCdUaGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgdG9rZW4nKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdCgnc29tZXRoaW5nIGVsc2Ugb3RoZXIgdGhhbiAyMDAgd2FzIHJldHVybmVkJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgICB4aHIuc2VuZCgpOwogICAgfSBlbHNlIHsKICAgICAgcmVqZWN0KCdDT1JTIG5vdCBzdXBwb3J0ZWQnKTsKICAgIH0KICB9KTsKfQoKLyoqCiogRnVuY3Rpb24gdG8gZXhjaGFuZ2UgdGhlIGNvZGUgcmVjZWl2ZWQgdG8gdGhlIGlkIFRva2VuLCBhY2Nlc3MgdG9rZW4gYW5kIGEgcmVmcmVzaCB0b2tlbgoqCiovCnZhciBleGNoYW5nZUNvZGUgPSBmdW5jdGlvbiBleGNoYW5nZUNvZGUoY29kZSkgewogIHZhciBpID0gZ29vZ2xlSW5mbzsKCiAgdmFyIFVSTCA9IGkudG9rZW5FbmRwb2ludCArICdjb2RlPScgKyBjb2RlICsgJyZjbGllbnRfaWQ9JyArIGkuY2xpZW50SUQgKyAnJmNsaWVudF9zZWNyZXQ9JyArIGkuY2xpZW50U2VjcmV0ICsgJyZyZWRpcmVjdF91cmk9JyArIGkucmVkaXJlY3RVUkkgKyAnJmdyYW50X3R5cGU9YXV0aG9yaXphdGlvbl9jb2RlJzsKCiAgLy9sZXQgVVJMID0gPSBpLnRva2VuRW5kcG9pbnQgKyAnY2xpZW50X2lkPScgKyBpLmNsaWVudElEICsgJyZjbGllbnRfc2VjcmV0PScgKyBpLmNsaWVudFNlY3JldCArICcmcmVmcmVzaF90b2tlbj0nICsgY29kZSArICcmZ3JhbnRfdHlwZT1yZWZyZXNoX3Rva2VuJzsKCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHNlbmRIVFRQUmVxdWVzdCgnUE9TVCcsIFVSTCkudGhlbihmdW5jdGlvbiAoaW5mbykgewogICAgICByZXNvbHZlKGluZm8pOwogICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIHJlamVjdChlcnJvcik7CiAgICB9KTsKICB9KTsKfTsKCi8qKgoqIElkZW50aXR5IFByb3ZpZGVyIFByb3h5CiovCnZhciBJZHBQcm94eSA9IHsKCiAgLyoqCiAgKiBGdW5jdGlvbiB0byB2YWxpZGF0ZSBhbiBpZGVudGl0eSBBc3NlcnRpb24gcmVjZWl2ZWQKICAqIFRPRE8gYWRkIGRldGFpbHMgb2YgdGhlIGltcGxlbWVudGF0aW9uLCBhbmQgaW1wcm92ZSB0aGUgaW1wbGVtZW50YXRpb24KICAqCiAgKiBAcGFyYW0gIHthc3NlcnRpb259ICAgIElkZW50aXR5IEFzc2VydGlvbiB0byBiZSB2YWxpZGF0ZWQKICAqIEBwYXJhbSAge29yaWdpbn0gICAgICAgT3JpZ2luIHBhcmFtZXRlciB0aGF0IGlkZW50aWZpZXMgdGhlIG9yaWdpbiBvZiB0aGUgUlRDUGVlckNvbm5lY3Rpb24KICAqIEByZXR1cm4ge1Byb21pc2V9ICAgICAgUmV0dXJucyBhIHByb21pc2Ugd2l0aCB0aGUgaWRlbnRpdHkgYXNzZXJ0aW9uIHZhbGlkYXRpb24gcmVzdWx0CiAgKi8KICB2YWxpZGF0ZUFzc2VydGlvbjogZnVuY3Rpb24gdmFsaWRhdGVBc3NlcnRpb24oYXNzZXJ0aW9uLCBvcmlnaW4pIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciBpID0gZ29vZ2xlSW5mbzsKCiAgICAgIHZhciBkZWNvZGVkQ29udGVudCA9IGF0b2IoYXNzZXJ0aW9uKTsKICAgICAgdmFyIGNvbnRlbnQgPSBKU09OLnBhcnNlKGRlY29kZWRDb250ZW50KTsKICAgICAgc2VuZEhUVFBSZXF1ZXN0KCdHRVQnLCBpLnRva2VuSW5mbyArIGNvbnRlbnQudG9rZW5JRCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CgogICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShyZXN1bHQpID09PSBKU09OLnN0cmluZ2lmeShjb250ZW50LnRva2VuSURKU09OKSkgewogICAgICAgICAgcmVzb2x2ZSh7IGlkZW50aXR5OiBjb250ZW50LnRva2VuSURKU09OLmVtYWlsLCBjb250ZW50czogY29udGVudC50b2tlbklESlNPTiB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmVqZWN0KCdpbnZhbGlkJyk7CiAgICAgICAgfQogICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CgogICAgICAgIHJlamVjdChlcnIpOwogICAgICB9KTsKICAgIH0pOwogIH0sCgogIC8qKgogICogRnVuY3Rpb24gdG8gZ2VuZXJhdGUgYW4gaWRlbnRpdHkgQXNzZXJ0aW9uCiAgKiBUT0RPIGFkZCBkZXRhaWxzIG9mIHRoZSBpbXBsZW1lbnRhdGlvbiwgYW5kIGltcHJvdmUgaW1wbGVtZW50YXRpb24KICAqCiAgKiBAcGFyYW0gIHtjb250ZW50c30gVGhlIGNvbnRlbnRzIGluY2x1ZGVzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBpZGVudGl0eSByZWNlaXZlZAogICogQHBhcmFtICB7b3JpZ2lufSBPcmlnaW4gcGFyYW1ldGVyIHRoYXQgaWRlbnRpZmllcyB0aGUgb3JpZ2luIG9mIHRoZSBSVENQZWVyQ29ubmVjdGlvbgogICogQHBhcmFtICB7dXNlcm5hbWVIaW50fSBvcHRpb25hbCB1c2VybmFtZUhpbnQgcGFyYW1ldGVyCiAgKiBAcmV0dXJuIHtQcm9taXNlfSByZXR1cm5zIGEgcHJvbWlzZSB3aXRoIGFuIGlkZW50aXR5IGFzc2VydGlvbgogICovCiAgZ2VuZXJhdGVBc3NlcnRpb246IGZ1bmN0aW9uIGdlbmVyYXRlQXNzZXJ0aW9uKGNvbnRlbnRzLCBvcmlnaW4sIGhpbnQpIHsKICAgIHZhciBpID0gZ29vZ2xlSW5mbzsKCiAgICAvL3N0YXJ0IHRoZSBsb2dpbiBwaGFzZQogICAgLy9UT0RPIGxhdGVyIHNob3VsZCBiZSBkZWZpbmVkIGEgYmV0dGVyIGFwcHJvYWNoCiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBpZiAoIWNvbnRlbnRzKSB7CiAgICAgICAgLyp0cnkgewogICAgICAgICAgaWYgKHdpbmRvdykgewogICAgICAgICAgICByZXNvbHZlKCd1cmwnKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgeyovCgogICAgICAgIHZhciByZXF1ZXN0VXJsID0gaS5hdXRob3Jpc2F0aW9uRW5kcG9pbnQgKyAnc2NvcGU9JyArIGkuc2NvcGUgKyAnJmNsaWVudF9pZD0nICsgaS5jbGllbnRJRCArICcmcmVkaXJlY3RfdXJpPScgKyBpLnJlZGlyZWN0VVJJICsgJyZyZXNwb25zZV90eXBlPScgKyBpLnR5cGUgKyAnJnN0YXRlPScgKyBpLnN0YXRlICsgJyZhY2Nlc3NfdHlwZT0nICsgaS5hY2Nlc3NUeXBlOwoKICAgICAgICByZWplY3QoeyBuYW1lOiAnSWRQTG9naW5FcnJvcicsIGxvZ2luVXJsOiByZXF1ZXN0VXJsIH0pOwoKICAgICAgICAvLyAgfQogICAgICB9IGVsc2UgewogICAgICAgICAgLy8gdGhlIHJlcXVlc3QgaGF2ZSBhbHJlYWR5IGJlZW4gbWFkZSwgc28gaWRwUFJveHkgd2lsbCBleGNoYW5nZSB0aGUgdG9rZW5zIGFsb25nIHRvIHRoZSBpZHAsIHRvIG9idGFpbiB0aGUgaW5mb3JtYXRpb24gbmVjZXNzYXJ5CiAgICAgICAgICB2YXIgYWNjZXNzVG9rZW4gPSB1cmxQYXJzZXIoY29udGVudHMsICdhY2Nlc3NfdG9rZW4nKTsKICAgICAgICAgIHZhciBpZFRva2VuID0gdXJsUGFyc2VyKGNvbnRlbnRzLCAnaWRfdG9rZW4nKTsKICAgICAgICAgIHZhciBjb2RlID0gdXJsUGFyc2VyKGNvbnRlbnRzLCAnY29kZScpOwoKICAgICAgICAgIGV4Y2hhbmdlQ29kZShjb2RlKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewoKICAgICAgICAgICAgLy9vYnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIKICAgICAgICAgICAgdmFyIGluZm9Ub2tlblVSTCA9IGkudXNlcmluZm8gKyB2YWx1ZS5hY2Nlc3NfdG9rZW47CiAgICAgICAgICAgIHNlbmRIVFRQUmVxdWVzdCgnR0VUJywgaW5mb1Rva2VuVVJMKS50aGVuKGZ1bmN0aW9uIChpbmZvVG9rZW4pIHsKCiAgICAgICAgICAgICAgdmFyIGlkZW50aXR5QnVuZGxlID0geyBhY2Nlc3NUb2tlbjogdmFsdWUuYWNjZXNzX3Rva2VuLCBpZFRva2VuOiB2YWx1ZS5pZF90b2tlbiwgcmVmcmVzaFRva2VuOiB2YWx1ZS5yZWZyZXNoX3Rva2VuLCB0b2tlblR5cGU6IHZhbHVlLnRva2VuX3R5cGUsIGluZm9Ub2tlbjogaW5mb1Rva2VuIH07CgogICAgICAgICAgICAgIHZhciBpZFRva2VuVVJMID0gaS50b2tlbkluZm8gKyB2YWx1ZS5pZF90b2tlbjsKCiAgICAgICAgICAgICAgLy9vYnRhaW4gaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIgaWRUb2tlbgogICAgICAgICAgICAgIHNlbmRIVFRQUmVxdWVzdCgnR0VUJywgaWRUb2tlblVSTCkudGhlbihmdW5jdGlvbiAoaWRUb2tlbikgewoKICAgICAgICAgICAgICAgIGlkZW50aXR5QnVuZGxlLnRva2VuSURKU09OID0gaWRUb2tlbjsKICAgICAgICAgICAgICAgIGlkZW50aXR5QnVuZGxlLmV4cGlyZXMgPSBpZFRva2VuLmV4cDsKICAgICAgICAgICAgICAgIGlkZW50aXR5QnVuZGxlLmVtYWlsID0gaWRUb2tlbi5lbWFpbDsKCiAgICAgICAgICAgICAgICB2YXIgYXNzZXJ0aW9uID0gYnRvYShKU09OLnN0cmluZ2lmeSh7IHRva2VuSUQ6IHZhbHVlLmlkX3Rva2VuLCB0b2tlbklESlNPTjogaWRUb2tlbiB9KSk7CiAgICAgICAgICAgICAgICB2YXIgaWRwQnVuZGxlID0geyBkb21haW46ICdnb29nbGUuY29tJywgcHJvdG9jb2w6ICdPSURDJyB9OwoKICAgICAgICAgICAgICAgIC8vVE9ETyBkZWxldGUgbGF0ZXIgdGhlIGZpZWxkIGluZm9Ub2tlbiwgYW5kIGRlbGV0ZSB0aGUgbmVlZCBpbiB0aGUgZXhhbXBsZQogICAgICAgICAgICAgICAgdmFyIHJldHVyblZhbHVlID0geyBhc3NlcnRpb246IGFzc2VydGlvbiwgaWRwOiBpZHBCdW5kbGUsIGluZm86IGlkZW50aXR5QnVuZGxlLCBpbmZvVG9rZW46IGluZm9Ub2tlbiB9OwoKICAgICAgICAgICAgICAgIGlkZW50aXRpZXNbbklkZW50aXR5XSA9IHJldHVyblZhbHVlOwogICAgICAgICAgICAgICAgKytuSWRlbnRpdHk7CgogICAgICAgICAgICAgICAgcmVzb2x2ZShyZXR1cm5WYWx1ZSk7CiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHsKCiAgICAgICAgICAgICAgICByZWplY3QoZSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewoKICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKCiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSk7CiAgfQp9OwoKLyoqCiogSWRlbnRpdHkgUHJvdmlkZXIgUHJveHkgUHJvdG9jb2wgU3R1YgoqLwoKdmFyIElkcFByb3h5UHJvdG9TdHViID0gKGZ1bmN0aW9uICgpIHsKCiAgLyoqCiAgKiBDb25zdHJ1Y3RvciBvZiB0aGUgSWRwUHJveHkgU3R1YgogICogVGhlIGNvbnN0cnVjdG9yIGFkZCBhIGxpc3RlbmVyIGluIHRoZSBtZXNzYWdlQnVzIHJlY2VpdmVkIGFuZCBzdGFydCBhIHdlYiB3b3JrZXIgd2l0aCB0aGUgaWRwUHJveHkgcmVjZWl2ZWQKICAqCiAgKiBAcGFyYW0gIHtVUkwuUnVudGltZVVSTH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTCBydW50aW1lUHJvdG9TdWJVUkwKICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICBidXNQb3N0TWVzc2FnZSAgICAgY29uZmlndXJhdGlvbgogICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uCiAgKi8KCiAgZnVuY3Rpb24gSWRwUHJveHlQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJZHBQcm94eVByb3RvU3R1Yik7CgogICAgdmFyIF90aGlzID0gdGhpczsKICAgIF90aGlzLnJ1bnRpbWVQcm90b1N0dWJVUkwgPSBydW50aW1lUHJvdG9TdHViVVJMOwogICAgX3RoaXMubWVzc2FnZUJ1cyA9IGJ1czsKICAgIF90aGlzLmNvbmZpZyA9IGNvbmZpZzsKCiAgICBfdGhpcy5tZXNzYWdlQnVzLmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24gKG1zZykgewogICAgICBpZiAobXNnLnRvID09PSAnZG9tYWluOi8vZ29vZ2xlLmNvbScpIHsKCiAgICAgICAgX3RoaXMucmVxdWVzdFRvSWRwKG1zZyk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgLy8gZXhwb3J0IGRlZmF1bHQgSWRwUHJveHlQcm90b1N0dWI7CgogIC8qKgogICAqIFRvIGFjdGl2YXRlIHRoaXMgcHJvdG9jb2wgc3R1YiwgdXNpbmcgdGhlIHNhbWUgbWV0aG9kIGZvciBhbGwgcHJvdG9zdHViLgogICAqIEBwYXJhbSAge1VSTC5SdW50aW1lVVJMfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lUHJvdG9TdHViVVJMIHJ1bnRpbWVQcm90b1N1YlVSTAogICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICBidXNQb3N0TWVzc2FnZSAgICAgY29uZmlndXJhdGlvbgogICAqIEBwYXJhbSAge1Byb3RvU3R1YkRlc2NyaXB0b3IuQ29uZmlndXJhdGlvbkRhdGFMaXN0fSBjb25maWd1cmF0aW9uICAgICAgY29uZmlndXJhdGlvbgogICAqIEByZXR1cm4ge09iamVjdH0gT2JqZWN0IHdpdGggbmFtZSBhbmQgaW5zdGFuY2Ugb2YgUHJvdG9TdHViCiAgICovCgogIC8qKgogICogRnVuY3Rpb24gdGhhdCBzZWUgdGhlIGludGVuZGVkIG1ldGhvZCBpbiB0aGUgbWVzc2FnZSByZWNlaXZlZCBhbmQgY2FsbCB0aGUgcmVzcGVjdGl2ZSBmdW5jdGlvbgogICoKICAqIEBwYXJhbSB7bWVzc2FnZX0gIG1lc3NhZ2UgcmVjZWl2ZWQgaW4gdGhlIG1lc3NhZ2VCdXMKICAqLwoKICBfY3JlYXRlQ2xhc3MoSWRwUHJveHlQcm90b1N0dWIsIFt7CiAgICBrZXk6ICdyZXF1ZXN0VG9JZHAnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcXVlc3RUb0lkcChtc2cpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHBhcmFtcyA9IG1zZy5ib2R5LnBhcmFtczsKCiAgICAgIHN3aXRjaCAobXNnLmJvZHkubWV0aG9kKSB7CiAgICAgICAgY2FzZSAnZ2VuZXJhdGVBc3NlcnRpb24nOgogICAgICAgICAgSWRwUHJveHkuZ2VuZXJhdGVBc3NlcnRpb24ocGFyYW1zLmNvbnRlbnRzLCBwYXJhbXMub3JpZ2luLCBwYXJhbXMudXNlcm5hbWVIaW50KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCB2YWx1ZSk7CiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgZXJyb3IpOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICd2YWxpZGF0ZUFzc2VydGlvbic6CiAgICAgICAgICBJZHBQcm94eS52YWxpZGF0ZUFzc2VydGlvbihwYXJhbXMuYXNzZXJ0aW9uLCBwYXJhbXMub3JpZ2luKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICBfdGhpcy5yZXBseU1lc3NhZ2UobXNnLCB2YWx1ZSk7CiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgX3RoaXMucmVwbHlNZXNzYWdlKG1zZywgZXJyb3IpOwogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICogVGhpcyBmdW5jdGlvbiByZWNlaXZlcyBhIG1lc3NhZ2UgYW5kIGEgdmFsdWUuIEl0IHJlcGxpZXMgdGhlIHZhbHVlIHRvIHRoZSBzZW5kZXIgb2YgdGhlIG1lc3NhZ2UgcmVjZWl2ZWQKICAgICoKICAgICogQHBhcmFtICB7bWVzc2FnZX0gICBtZXNzYWdlIHJlY2VpdmVkCiAgICAqIEBwYXJhbSAge3ZhbHVlfSAgICAgdmFsdWUgdG8gaW5jbHVkZSBpbiB0aGUgbmV3IG1lc3NhZ2UgdG8gc2VuZAogICAgKi8KICB9LCB7CiAgICBrZXk6ICdyZXBseU1lc3NhZ2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGx5TWVzc2FnZShtc2csIHZhbHVlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbWVzc2FnZSA9IHsgaWQ6IG1zZy5pZCwgdHlwZTogJ3Jlc3BvbnNlJywgdG86IG1zZy5mcm9tLCBmcm9tOiBtc2cudG8sCiAgICAgICAgYm9keTogeyBjb2RlOiAyMDAsIHZhbHVlOiB2YWx1ZSB9IH07CgogICAgICBfdGhpcy5tZXNzYWdlQnVzLnBvc3RNZXNzYWdlKG1lc3NhZ2UpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIElkcFByb3h5UHJvdG9TdHViOwp9KSgpOwoKZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogIHJldHVybiB7CiAgICBuYW1lOiAnSWRwUHJveHlQcm90b1N0dWInLAogICAgaW5zdGFuY2U6IG5ldyBJZHBQcm94eVByb3RvU3R1Yih1cmwsIGJ1cywgY29uZmlnKQogIH07Cn0KCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV19LHt9LFsxXSkoMSkKfSk7",
      "sourceCodeClassname": "IdpProxyProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 1,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of IdpProxyProtoStub",
    "objectName": "IdpProxyProtoStub",
    "configuration": {},
    "constraints": "",
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  }
}